<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Maršál a Špión - Online</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Základní styly pro jistotu, kdyby chyběl style.css */
        body { font-family: 'Montserrat', sans-serif; background-color: #f4f4f4; }
        #board {
            display: grid;
            grid-template-columns: repeat(10, 50px);
            grid-template-rows: repeat(10, 50px);
            gap: 2px;
            background-color: #333;
            width: fit-content;
            margin: 20px auto;
            border: 5px solid #333;
        }
        .cell {
            width: 50px; height: 50px;
            background-color: #8bc34a; /* Tráva */
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; position: relative;
        }
        .cell.river { background-color: #03a9f4; } /* Řeka */
        .piece-base { width: 44px; height: 44px; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 2px solid white; background: white; font-weight: bold; font-size: 12px; position: relative; }
        .piece-icon { width: 30px; height: 30px; }
        .player1-piece .piece-base { border-color: #d32f2f; color: #d32f2f; }
        .player2-piece .piece-base { border-color: #1976d2; color: #1976d2; }
        .hidden-rank { background: #555 !important; color: transparent !important; } /* Skrytá figurka */
        .hidden-rank img { filter: grayscale(100%) brightness(50%); }
        .selected { box-shadow: 0 0 10px 3px yellow; z-index: 10; }
        
        /* UI */
        .score-table { background: white; padding: 10px; margin: 10px; border-radius: 8px; }
        #main-layout { display: flex; justify-content: center; align-items: flex-start; gap: 20px; }
        .destroyed { opacity: 0.4; }
    </style>
</head>
<body>

<div id="lobby-controls" style="text-align: center; padding: 20px; border: 1px solid #ccc; margin: 50px auto; width: 400px; max-width: 90%; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
    <h2>Vytvořit nebo se připojit ke hře</h2>
    <div style="margin-bottom: 20px;">
        <button id="create-game-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 4px;">Vytvořit novou hru</button>
    </div>
    <div style="border-top: 1px solid #eee; padding-top: 20px;">
        <input type="text" id="room-code-input" placeholder="Kód (4 cifry)" maxlength="4" style="padding: 10px; font-size: 16px; width: 120px; text-align: center; border: 1px solid #ccc; border-radius: 4px;">
        <button id="join-game-btn" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #2196F3; color: white; border: none; border-radius: 4px;">Připojit se</button>
    </div>
    <p id="lobby-status" style="font-weight: bold; margin-top: 20px; color: #333; min-height: 20px;">Čekám na volbu...</p>
</div>

<div id="main-layout" style="display: none;">
    
    <div id="player1-score-table" class="score-table">
        <h3 style="color: #d32f2f;">Hráč 1</h3>
        <div class="pieces-status-grid"></div>
    </div>

    <div id="game-container">
        <h1>Maršál a Špión</h1>

        <div id="game-info">
            <span id="current-player">Načítám...</span>
        </div>
        
        <div id="board"></div>

        <div id="ready-container">
            <button id="ready-button">Ready</button>
        </div>
        
        <div id="game-code-display"></div>
    </div>

    <div id="player2-score-table" class="score-table">
        <h3 style="color: #1976d2;">Hráč 2</h3>
        <div class="pieces-status-grid"></div>
    </div>
    
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Konfigurace Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAvwAN77ipnV2B5d7gAHK-889SA-Vck3yM",
    authDomain: "marsalaspion.firebaseapp.com",
    databaseURL: "https://marsalaspion-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "marsalaspion",
    storageBucket: "marsalaspion.firebasestorage.app",
    messagingSenderId: "944218897880",
    appId: "1:944218897880:web:8b28627033b5443ed206ad",
    measurementId: "G-WWB7XFZD6T"
  };

  // Inicializace Firebase
  if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
  }
  const database = firebase.database();
  console.log("Firebase inicializováno.");
</script>

<script src="script.js"></script>
</body>
</html>